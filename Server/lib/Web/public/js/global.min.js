/*!
 * Rule the words! KKuTu Online
 * Copyright (C) 2017 JJoriping(op@jjo.kr)
 *
 * This program is free software: you can redistribute it and/or modify
 * it under the terms of the GNU General Public License as published by
 * the Free Software Foundation, either version 3 of the License, or
 * (at your option) any later version.
 *
 * This program is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License
 * along with this program. If not, see <http://www.gnu.org/licenses/>.
 */(()=>{var o;!function(){var t,e=setTimeout;function i(o){t[0],t[1];location.href="/login"}function l(o,t){var i=o.attr("id"),n=$("#ac-"+i);o.val()!=t&&((t=o.val())?$.get("http://jjo.kr/search?q="+encodeURI(t),(function(t){var e,l=0;for(e in n.empty(),globalThis["wl-"+i]=t.list.slice(0,10),globalThis["wi-"+i]=-1,t.list){if(l++>=10)break;n.append($("<div>").attr("id","aci-"+t.list[e]._id).addClass("autocomp-item ellipse").html(t.list[e].profile.name).on("click",(function(o){location.href="http://jjo.kr/users/"+$(o.currentTarget).attr("id").slice(4)})))}l?(n.show(),o.css("border-bottom-left-radius",0)):(n.hide(),o.css("border-bottom-left-radius",""))})):(n.hide(),o.css("border-bottom-left-radius",""))),e(l,200,o,t)}$.prototype.hotkey=function(o,t){var e=$(this);return(o||$(window)).on("keydown",(function(o){o.shiftKey||o.keyCode==t&&(e.trigger("click"),o.preventDefault())})),e},$.prototype.color=function(o){return $(this).css({color:o})},$.prototype.bgColor=function(o){return $(this).css({"background-color":o})},$.cookie=function(o,t){if(void 0===t)return function(o){o+="=";for(var t=decodeURIComponent(document.cookie).split(";"),e=[],i=0;i<t.length;i++)0==t[i].trim().indexOf(o)&&(e=t[i].trim().split("="));return unescape(e.length>0?e[1]:"")}(o);var e,i,l,n;e=o,i=t,(n=new Date).setDate(n.getDate()+l),cookies=e+"="+escape(i)+"; path=/ ",void 0!==l&&(cookies+=";expires="+n.toGMTString()+";"),document.cookie=cookies},$(document).ready((function(l){var n,a=$("#global-notice").hide(),c=$("#gn-content").html()||"";if(globalThis.profile=$("#profile").html(),globalThis.profile?globalThis.profile=JSON.parse(globalThis.profile):globalThis.profile={},$.cookie("test","good"),"good"!=$.cookie("test")?a.html(c="쿠키 사용이 차단되어 있습니다. 로그인 관련 기능이 제한됩니다.<br>제한을 풀기 위해서는 브라우저 설정에서 쿠키 사용을 허용하도록 설정해야 합니다.<br>"+c):$.cookie("test",""),c.length>1&&a.show(),a.on("click",(function(o){a.hide()})),$(window).on("resize",(function(o){t=[$(window).width(),$(window).height()],$("#Middle").css("margin-left",Math.max(0,.5*t[0]-500)),$("#Bottom").width(t[0])})).on("mousemove",(function(o){null!=n&&$(".expl-active").css({left:Math.min(o.clientX+5,t[0]-n[0]-12),top:Math.min(o.clientY+23,t[1]-n[1]-12)})})).trigger("resize"),$("#quick-search-btn").on("click",(function(o){var t;$("#quick-search-btn").hasClass("searching")||((t=$(".autocomp-select").html())&&$("#quick-search-tf").val(t),$("#quick-search-btn").addClass("searching").html($("<i>").addClass("fa fa-spin fa-spinner")),location.href="http://jjo.kr?q="+encodeURI($("#quick-search-tf").val()))})).hotkey($("#quick-search-tf"),13),""==$.cookie("lc")&&$.cookie("lc","ko_KR"),globalThis.profile.token)$("#account-info").html(globalThis.profile.title||globalThis.profile.name).on("click",(function(t){confirm(o.ASK_LOGOUT)&&(location.href="/logout")}));else{if(window.FB)try{FB.logout()}catch(l){e((function(){FB.logout()}),1e3)}$("#account-info").html(o.LOGIN).on("click",i)}globalThis.watchInput($("#quick-search-tf")),(globalThis.expl=function(o){(o?o.find(".expl"):$(".expl")).parent().addClass("expl-mother").on("mouseenter",(function(o){var t=$(o.currentTarget).children(".expl");n=[t.width(),t.height()],$(".expl-active").removeClass("expl-active"),t.addClass("expl-active")})).on("mouseleave",(function(o){$(o.currentTarget).children(".expl").removeClass("expl-active")}))})()})),globalThis.watchInput=function(o){var t=o.attr("id");return o.after($("<div>").addClass("autocomp").attr("id","ac-"+t).css({"margin-top":o.outerHeight(),width:o.outerWidth()-6}).hide()).on("keydown",(function(o){var e,i=38==o.keyCode?-1:40==o.keyCode?1:0;i&&(e=globalThis["wl-"+t])&&(-1==globalThis["wi-"+t]&&-1==i&&(i=0),$(".autocomp-select").removeClass("autocomp-select"),globalThis["wi-"+t]+=i,globalThis["wi-"+t]<0&&(globalThis["wi-"+t]+=e.length),globalThis["wi-"+t]>=e.length&&(globalThis["wi-"+t]=0),$("#aci-"+e[globalThis["wi-"+t]]._id).addClass("autocomp-select"),o.preventDefault())})),e(l,200,o,o.val())},globalThis.zeroPadding=function(o,t){var e=o.toString();return"000000000000000".slice(0,Math.max(0,t-e.length))+e},globalThis.onPopup=function(o){location.href=o}}()})();